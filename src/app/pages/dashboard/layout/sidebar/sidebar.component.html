<div class="sidebar-overlay" (click)="closeSidebar.emit()"></div>

<aside class="sidebar">
    <div class="sidebar-header">
        <div class="logo">NEXUS<span style="color:var(--primary)">POS</span></div>
    </div>
    
    <nav class="sidebar-nav">
        <div class="nav-label">Main Menu</div>
        
        <a *ngIf="currentUser?.permissions?.canViewDashboard" 
           (click)="navigate.emit('Dashboard')" 
           [class.active]="currentView === 'Dashboard'" 
           class="nav-item">
           Overview
        </a>
        
        <a *ngIf="currentUser?.permissions?.canViewOrders" 
           (click)="navigate.emit('Stores')" 
           [class.active]="currentView === 'Stores' || currentView === 'StoreDetails'" 
           class="nav-item">
           All Stores
        </a>
        
        <a *ngIf="currentUser?.permissions?.canManageInventory" 
           (click)="navigate.emit('Inventory')" 
           [class.active]="currentView === 'Inventory'" 
           class="nav-item">
           Inventory Manager
        </a>
        
        <a *ngIf="currentUser?.permissions?.canViewCustomers" 
           (click)="navigate.emit('Customers')" 
           [class.active]="currentView === 'Customers'" 
           class="nav-item">
           CRM
        </a>
        
        <a *ngIf="currentUser?.permissions?.canManageUsers" 
           (click)="navigate.emit('Users')" 
           [class.active]="currentView === 'Users'" 
           class="nav-item" 
           style="color:var(--primary); font-weight:600;">
           üë• Users (Admin)
        </a>
        
        <div class="nav-label" style="margin-top: 2rem;">System</div>
        
        <a *ngIf="currentUser?.permissions?.canManageSettings" 
           (click)="navigate.emit('Tickets')" 
           [class.active]="currentView === 'Tickets'" 
           class="nav-item">
           üé´ Help Desk
        </a>

        <a *ngIf="currentUser?.permissions?.canViewReports" 
           (click)="navigate.emit('Reports')" 
           [class.active]="currentView === 'Reports'" 
           class="nav-item">
           Data Export
        </a>
        
        <a *ngIf="currentUser?.permissions?.canManageSettings" 
           (click)="navigate.emit('Settings')" 
           class="nav-item">
           Global Settings
        </a>

        <div class="nav-label" style="margin-top: 2rem;">Tools</div>
        
        <a *ngIf="currentUser?.permissions?.canCreateOrder" 
           (click)="launchPos.emit()" 
           [class.active]="currentView === 'POS'" 
           class="nav-item">
           üñ•Ô∏è POS Simulator
        </a>

    </nav>
    
    <div class="sidebar-footer">
        <div class="user-info">
            <span class="name">{{ currentUser?.name || 'Loading...' }}</span>
            <span class="role">{{ currentUser?.role || '' }}</span>
        </div>
        <button type="button" class="btn-logout-icon" (click)="logout.emit()" title="Log Out">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
        </button>
    </div>
</aside>